<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dosis Diaria de Inspiración</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Montserrat:wght@300;400;600&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            overscroll-behavior-y: none;
        }
        
        .quote-font {
            font-family: 'Merriweather', serif;
        }

        .fade-in {
            animation: fadeIn 1.0s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-btn {
            transition: transform 0.1s active, background-color 0.2s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .feedback-btn:active {
            transform: scale(0.96);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen px-4 py-6">

    <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-xl w-full max-w-lg border border-white/60 flex flex-col overflow-hidden relative">
        
        <!-- Contenido Principal -->
        <div class="p-6 md:p-10 flex flex-col items-center text-center flex-grow">
            
            <!-- Logo -->
            <div class="mb-5 w-full flex justify-center">
                <img src="OIP.webp" 
                     alt="Universidad Politécnica Salesiana" 
                     class="h-24 md:h-28 w-auto object-contain hover:scale-105 transition-transform duration-300"
                     onerror="this.style.display='none';">
            </div>

            <!-- Contenedor de la frase -->
            <div id="quote-container" class="mb-8 w-full fade-in flex-grow flex flex-col justify-center">
                <p id="quote-text" class="quote-font text-xl md:text-3xl text-gray-800 italic leading-relaxed mb-4">
                    "Cargando inspiración..."
                </p>
                <p id="quote-author" class="text-xs md:text-sm text-gray-500 uppercase tracking-widest font-bold mt-2">
                    
                </p>
                
                <!-- Mensaje de error -->
                <div id="error-message" class="hidden mt-4 p-3 bg-red-50 border border-red-200 rounded text-red-600 text-xs text-left">
                    <strong>¡Error de Código!</strong><br>
                    Error de sintaxis en la lista de frases.<br>
                    <span class="opacity-75">Presiona F12 para ver detalles.</span>
                </div>
            </div>

            <!-- SECCIÓN DE FEEDBACK -->
            <div id="feedback-section" class="w-full bg-indigo-50/80 rounded-2xl p-5 border border-indigo-100">
                <p id="feedback-question" class="text-sm text-gray-600 mb-4 font-semibold">¿Te ayudó esta frase?</p>
                
                <div id="feedback-buttons" class="flex gap-3 w-full">
                    <button onclick="registrarRespuesta('SI')" class="feedback-btn flex-1 flex items-center justify-center gap-2 py-4 bg-white text-green-600 border border-green-200 rounded-xl shadow-sm hover:bg-green-50 font-bold text-base md:text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7" />
                        </svg>
                        SÍ
                    </button>
                    
                    <button onclick="registrarRespuesta('NO')" class="feedback-btn flex-1 flex items-center justify-center gap-2 py-4 bg-white text-red-500 border border-red-200 rounded-xl shadow-sm hover:bg-red-50 font-bold text-base md:text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                        NO
                    </button>
                </div>
                
                <!-- Mensajes de estado -->
                <div id="feedback-message" class="hidden py-2 text-indigo-600 text-sm font-semibold animate-pulse">
                    ¡Gracias! Tu respuesta se ha guardado.
                </div>
                <div id="feedback-error" class="hidden py-2 text-red-500 text-xs mt-2">
                    Hubo un error al guardar.
                </div>
            </div>
        </div>

        <div class="bg-gray-50 px-6 py-3 text-center border-t border-gray-100">
             <div class="text-[10px] md:text-xs text-gray-400 font-medium">
                Frases vistas: <span id="counter">0</span> / <span id="total">0</span>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURACIÓN
        const GOOGLE_SCRIPT_URL = 'TU_URL_DE_APPS_SCRIPT_AQUI'; 

        // BASE DE DATOS DE 200 FRASES (Autoestima, Gratitud, Paz, Servicio, Motivación)
        const frasesDatabase = [
            // --- MOTIVACIÓN Y ÉXITO ---
            { text: "El único modo de hacer un gran trabajo es amar lo que haces.", author: "Steve Jobs" },
            { text: "No cuentes los días, haz que los días cuenten.", author: "Muhammad Ali" },
            { text: "La felicidad no es algo que pospones para el futuro; es algo que diseñas para el presente.", author: "Jim Rohn" },
            { text: "Cree que puedes y casi lo habrás logrado.", author: "Theodore Roosevelt" },
            { text: "Lo que no te mata te hace más fuerte.", author: "Friedrich Nietzsche" },
            { text: "La vida es 10% lo que te ocurre y 90% cómo reaccionas a ello.", author: "Charles R. Swindoll" },
            { text: "No busques el momento perfecto, solo busca el momento y hazlo perfecto.", author: "Anónimo" },
            { text: "El éxito es la suma de pequeños esfuerzos repetidos día tras día.", author: "Robert Collier" },
            { text: "Tu tiempo es limitado, así que no lo desperdicies viviendo la vida de alguien más.", author: "Steve Jobs" },
            { text: "La mejor venganza es un éxito masivo.", author: "Frank Sinatra" },
            { text: "Si puedes soñarlo, puedes hacerlo.", author: "Walt Disney" },
            { text: "A veces la adversidad es lo que necesitas encarar para ser exitoso.", author: "Zig Ziglar" },
            { text: "La disciplina es el puente entre metas y logros.", author: "Jim Rohn" },
            { text: "El fracaso es solo la oportunidad de comenzar de nuevo de forma más inteligente.", author: "Henry Ford" },
            { text: "El secreto para salir adelante es comenzar.", author: "Mark Twain" },
            { text: "No dejes que el miedo a perder sea mayor que la emoción de ganar.", author: "Robert Kiyosaki" },
            { text: "La acción es la clave fundamental para todo éxito.", author: "Pablo Picasso" },
            { text: "El éxito consiste en ir de fracaso en fracaso sin perder el entusiasmo.", author: "Winston Churchill" },
            { text: "Tu actitud, no tu aptitud, determinará tu altitud.", author: "Zig Ziglar" },
            { text: "Si no te gusta algo, cámbialo. Si no puedes cambiarlo, cambia tu actitud.", author: "Maya Angelou" },
            { text: "Cae siete veces y levántate ocho.", author: "Proverbio japonés" },
            { text: "Todo lo que siempre has querido está al otro lado del miedo.", author: "George Addair" },
            { text: "Las oportunidades no pasan, las creas.", author: "Chris Grosser" },
            { text: "No he fracasado. Solo he encontrado 10,000 formas que no funcionan.", author: "Thomas Edison" },
            { text: "La única forma de hacer lo imposible es creer que es posible.", author: "Charles Kingsleigh" },
            { text: "El futuro pertenece a quienes creen en la belleza de sus sueños.", author: "Eleanor Roosevelt" },
            { text: "No esperes. El tiempo nunca será el justo.", author: "Napoleon Hill" },
            { text: "La perseverancia es fallar 19 veces y tener éxito la vigésima.", author: "Julie Andrews" },
            { text: "El éxito no es la clave de la felicidad. La felicidad es la clave del éxito.", author: "Albert Schweitzer" },
            { text: "Haz lo que puedes, con lo que tienes, donde estés.", author: "Theodore Roosevelt" },
            { text: "La vida es una aventura atrevida o no es nada.", author: "Helen Keller" },
            { text: "El pesimista ve dificultad en toda oportunidad. El optimista ve oportunidad en toda dificultad.", author: "Winston Churchill" },
            { text: "No dejes que lo que no puedes hacer interfiera con lo que puedes hacer.", author: "John Wooden" },
            { text: "El éxito suele llegar a quienes están demasiado ocupados para buscarlo.", author: "Henry David Thoreau" },
            { text: "Si no diseñas tu propio plan de vida, es probable que caigas en el plan de otra persona.", author: "Jim Rohn" },
            { text: "La creatividad es la inteligencia divirtiéndose.", author: "Albert Einstein" },
            { text: "Haz de cada día tu obra maestra.", author: "John Wooden" },
            { text: "Lo único imposible es aquello que no intentas.", author: "Anónimo" },
            { text: "La motivación es lo que te pone en marcha. El hábito es lo que hace que sigas.", author: "Jim Ryun" },
            { text: "Para tener éxito, tu deseo de éxito debe ser mayor que tu miedo al fracaso.", author: "Bill Cosby" },
            { text: "Sueña en grande y atrévete a fallar.", author: "Norman Vaughan" },
            { text: "La vida se encoge o se expande en proporción a tu coraje.", author: "Anaïs Nin" },
            { text: "El hombre que mueve montañas empieza apartando piedrecitas.", author: "Confucio" },
            { text: "No te detengas cuando estés cansado. Detente cuando hayas terminado.", author: "Marilyn Monroe" },
            { text: "Nunca es demasiado tarde para ser lo que podrías haber sido.", author: "George Eliot" },
            { text: "La mejor forma de predecir el futuro es crearlo.", author: "Peter Drucker" },

            // --- AUTOESTIMA Y AMOR PROPIO ---
            { text: "Cree en ti mismo y en todo lo que eres.", author: "Christian D. Larson" },
            { text: "Amarse a uno mismo es el comienzo de un romance de por vida.", author: "Oscar Wilde" },
            { text: "Tú mismo, tanto como cualquier otro en el universo entero, mereces tu amor y afecto.", author: "Buda" },
            { text: "Nadie puede hacerte sentir inferior sin tu consentimiento.", author: "Eleanor Roosevelt" },
            { text: "La confianza en uno mismo es el primer secreto del éxito.", author: "Ralph Waldo Emerson" },
            { text: "No necesitas ser perfecto para inspirar a otros. Deja que se inspiren en cómo manejas tus imperfecciones.", author: "Anónimo" },
            { text: "Sé tú mismo, todos los demás ya están ocupados.", author: "Oscar Wilde" },
            { text: "Tu valor no disminuye en base a la incapacidad de alguien de ver tu valía.", author: "Anónimo" },
            { text: "Háblate a ti mismo como harías con alguien a quien amas.", author: "Brené Brown" },
            { text: "La belleza comienza en el momento en que decides ser tú misma.", author: "Coco Chanel" },
            { text: "No te compares con nadie. Ten la cabeza bien alta y recuerda: no eres ni mejor ni peor, simplemente eres tú.", author: "Anónimo" },
            { text: "Querer ser otra persona es malgastar la persona que eres.", author: "Kurt Cobain" },
            { text: "Eres suficiente tal como eres.", author: "Meghan Markle" },
            { text: "La relación más importante que jamás tendrás es la relación contigo mismo.", author: "Steve Maraboli" },
            { text: "Lo que piensas de ti mismo es mucho más importante que lo que los demás piensan de ti.", author: "Séneca" },
            { text: "Acéptate a ti mismo, ámate a ti mismo y sigue adelante.", author: "Roy T. Bennett" },
            { text: "Eres más valiente de lo que crees, más fuerte de lo que pareces y más inteligente de lo que piensas.", author: "A.A. Milne" },
            { text: "La autoestima baja es como conducir por la vida con el freno de mano puesto.", author: "Maxwell Maltz" },
            { text: "No es lo que te llamas, es a qué respondes.", author: "W.C. Fields" },
            { text: "El respeto empieza por uno mismo.", author: "Anónimo" },
            { text: "Tú eres tu propio límite o tu propia libertad.", author: "Anónimo" },
            { text: "Invierte en ti mismo. Es la mejor inversión que harás.", author: "Anónimo" },
            { text: "No permitas que las sombras de tu pasado apaguen la luz de tu futuro.", author: "Anónimo" },
            { text: "Eres una obra de arte en progreso.", author: "Anónimo" },
            { text: "La confianza no viene de tener siempre la razón, sino de no tener miedo a equivocarse.", author: "Peter T. McIntyre" },
            { text: "Cuida tu cuerpo, es el único lugar que tienes para vivir.", author: "Jim Rohn" },
            { text: "Ser dueño de nuestra historia y amarnos a nosotros mismos a través de ese proceso es lo más valiente que jamás haremos.", author: "Brené Brown" },
            { text: "No apagues tu luz para que otros se sientan cómodos.", author: "Anónimo" },
            { text: "Tu única competencia es quien eras ayer.", author: "Anónimo" },
            { text: "Valórate lo suficiente como para alejarte de lo que no te sirve, no te hace crecer o no te hace feliz.", author: "Anónimo" },
            { text: "Eres el protagonista de tu propia vida. No dejes que nadie escriba tu guion.", author: "Anónimo" },
            { text: "Perdonarse a uno mismo es el primer paso hacia la sanación.", author: "Anónimo" },
            { text: "Tu paz interior es más importante que tratar de entender por qué algo sucedió.", author: "Anónimo" },
            { text: "Eres un diamante, nadie puede romperte.", author: "Anónimo" },
            { text: "Hoy elijo ser feliz conmigo mismo.", author: "Anónimo" },
            { text: "La verdadera belleza es una luz en el corazón.", author: "Kahlil Gibran" },
            { text: "No busques aprobación externa, busca tu propia aceptación.", author: "Anónimo" },
            { text: "Tu potencial es infinito.", author: "Anónimo" },
            { text: "Ámate primero y todo lo demás caerá en su lugar.", author: "Lucille Ball" },
            { text: "Confía en tu intuición, es tu alma susurrándote.", author: "Anónimo" },
            
            // --- GRATITUD ---
            { text: "La gratitud convierte lo que tenemos en suficiente.", author: "Anónimo" },
            { text: "No es la felicidad lo que nos hace agradecidos; es la gratitud lo que nos hace felices.", author: "David Steindl-Rast" },
            { text: "Siente gratitud por lo que tienes y terminarás teniendo más.", author: "Oprah Winfrey" },
            { text: "La gratitud es la memoria del corazón.", author: "Jean Baptiste Massieu" },
            { text: "Empieza cada día con un corazón agradecido.", author: "Anónimo" },
            { text: "La gratitud da sentido a nuestro pasado, trae paz al presente y crea una visión para el mañana.", author: "Melody Beattie" },
            { text: "Agradece por las lecciones, incluso cuando vienen envueltas en dolor.", author: "Anónimo" },
            { text: "La gratitud es la flor más bella que brota del alma.", author: "Henry Ward Beecher" },
            { text: "Cuando te enfocas en lo bueno, lo bueno mejora.", author: "Abraham Hicks" },
            { text: "La gratitud transforma el caos en orden y la confusión en claridad.", author: "Anónimo" },
            { text: "Gracias a la vida que me ha dado tanto.", author: "Violeta Parra" },
            { text: "Disfruta de las pequeñas cosas, porque un día mirarás atrás y te darás cuenta de que eran las grandes cosas.", author: "Robert Brault" },
            { text: "La gratitud es un imán para los milagros.", author: "Anónimo" },
            { text: "Agradece lo que eres ahora y sigue luchando por lo que quieres ser mañana.", author: "Anónimo" },
            { text: "La gratitud es la llave que abre la puerta a la abundancia.", author: "Anónimo" },
            { text: "El agradecimiento es la parte principal de un hombre de bien.", author: "Francisco de Quevedo" },
            { text: "Solo hay dos maneras de vivir tu vida. Una es como si nada fuera un milagro. La otra es como si todo fuera un milagro.", author: "Albert Einstein" },
            { text: "Agradece a la llama su luz, pero no olvides el pie del candil que paciente la sostiene.", author: "Rabindranath Tagore" },
            { text: "La gratitud silenciosa no sirve de mucho a nadie.", author: "Gertrude Stein" },
            { text: "Hoy es un regalo, por eso se llama presente.", author: "Anónimo" },
            { text: "Agradece a tus enemigos, porque son tus mejores maestros.", author: "Dalai Lama" },
            { text: "La gratitud no es solo la más grande de las virtudes, sino la madre de todas las demás.", author: "Cicerón" },
            { text: "Dar gracias es un acto de humildad y reconocimiento.", author: "Anónimo" },
            { text: "La gratitud abre la plenitud de la vida.", author: "Melody Beattie" },
            { text: "Agradece las puertas cerradas, las desviaciones y los obstáculos; te protegen de caminos que no eran para ti.", author: "Anónimo" },
            { text: "Quien no agradece lo poco, no agradecerá lo mucho.", author: "Proverbio estonio" },
            { text: "La gratitud es la riqueza del alma.", author: "Anónimo" },
            { text: "Despierta con determinación, acuéstate con satisfacción y gratitud.", author: "Anónimo" },
            { text: "Un corazón agradecido es un imán para los milagros.", author: "Anónimo" },
            { text: "La gratitud cambia los dolores de la memoria en una alegría tranquila.", author: "Dietrich Bonhoeffer" },
            { text: "Agradece cada respiración, es un regalo de vida.", author: "Anónimo" },
            { text: "La gratitud es el antídoto contra el miedo.", author: "Anónimo" },
            { text: "Sé agradecido por los momentos difíciles, te ayudan a crecer.", author: "Anónimo" },
            { text: "La gratitud es la forma más elevada de pensamiento.", author: "G.K. Chesterton" },
            { text: "Nunca dejes que las cosas que quieres te hagan olvidar las cosas que tienes.", author: "Anónimo" },
            { text: "La gratitud es un puente hacia la felicidad.", author: "Anónimo" },
            { text: "Agradece la lluvia que riega las flores de tu alma.", author: "Anónimo" },
            { text: "La gratitud hace que lo que tenemos sea suficiente.", author: "Anónimo" },
            { text: "Agradecer es multiplicar las bendiciones.", author: "Anónimo" },
            { text: "La gratitud es el vino del alma. Embriágate.", author: "Rumi" },

            // --- PAZ INTERIOR ---
            { text: "La paz viene de adentro. No la busques afuera.", author: "Buda" },
            { text: "No dejes que el comportamiento de otros destruya tu paz interior.", author: "Dalai Lama" },
            { text: "La paz comienza con una sonrisa.", author: "Madre Teresa" },
            { text: "Si quieres paz, no hables con tus amigos, habla con tus enemigos.", author: "Desmond Tutu" },
            { text: "La paz no es la ausencia de conflictos, es la capacidad de manejar el conflicto por medios pacíficos.", author: "Ronald Reagan" },
            { text: "Quien tiene paz en su conciencia, lo tiene todo.", author: "Don Bosco" },
            { text: "Para tener paz mental, renuncia a querer tener la razón siempre.", author: "Anónimo" },
            { text: "La paz es libertad en tranquilidad.", author: "Cicerón" },
            { text: "Cuando haces las paces con la autoridad, te conviertes en la autoridad.", author: "Jim Morrison" },
            { text: "La paz es un viaje de mil millas y se debe dar un paso a la vez.", author: "Lyndon B. Johnson" },
            { text: "Perdona a los demás, no porque merezcan el perdón, sino porque tú mereces la paz.", author: "Anónimo" },
            { text: "La tranquilidad perfecta consiste en el buen orden de la mente, en tu propio reino.", author: "Marco Aurelio" },
            { text: "No hay camino para la paz, la paz es el camino.", author: "Mahatma Gandhi" },
            { text: "La paz es el resultado de reentrenar tu mente para procesar la vida tal como es, en lugar de como crees que debería ser.", author: "Wayne Dyer" },
            { text: "Mantén la calma y la serenidad en medio del caos.", author: "Anónimo" },
            { text: "La paz interior comienza el momento en que eliges no permitir que otra persona o evento controle tus emociones.", author: "Pema Chödrön" },
            { text: "El silencio es a veces la mejor respuesta.", author: "Dalai Lama" },
            { text: "Respira. Suelta. Y recuerda que este momento es el único que sabes que tienes seguro.", author: "Oprah Winfrey" },
            { text: "La preocupación no quita los problemas de mañana, quita la paz de hoy.", author: "Anónimo" },
            { text: "La paz no se puede mantener por la fuerza; solo se puede lograr mediante la comprensión.", author: "Albert Einstein" },
            { text: "Sé el cambio que quieres ver en el mundo.", author: "Mahatma Gandhi" },
            { text: "La serenidad no es estar a salvo de la tormenta, sino encontrar la paz en medio de ella.", author: "Anónimo" },
            { text: "Donde hay fe, hay amor; donde hay amor, hay paz.", author: "Anónimo" },
            { text: "La paz es un regalo que te das a ti mismo.", author: "Anónimo" },
            { text: "No puedes encontrar la paz evitando la vida.", author: "Virginia Woolf" },
            { text: "La paz es la música del alma.", author: "Anónimo" },
            { text: "Estar en paz es mejor que tener razón.", author: "Anónimo" },
            { text: "La paz mundial comienza con la paz interior.", author: "Dalai Lama" },
            { text: "Busca la paz y síguela.", author: "Salmos" },
            { text: "La paz es el lenguaje del universo.", author: "Anónimo" },
            { text: "Deja ir lo que no puedes controlar y encontrarás la paz.", author: "Anónimo" },
            { text: "La calma es un superpoder.", author: "Anónimo" },
            { text: "La paz es ver el amanecer y saber que tienes otra oportunidad.", author: "Anónimo" },
            { text: "Tu paz es tu mayor riqueza.", author: "Anónimo" },
            { text: "Nada puede traerte paz sino tú mismo.", author: "Ralph Waldo Emerson" },
            { text: "La paz es el arte de dejar ir.", author: "Anónimo" },
            { text: "El perdón es la llave de la paz.", author: "Anónimo" },
            { text: "Siembra paz y cosecharás felicidad.", author: "Anónimo" },
            { text: "La paz es un estado mental, no una situación.", author: "Anónimo" },

            // --- SERVICIO Y AYUDA A LOS DEMÁS ---
            { text: "El que no vive para servir, no sirve para vivir.", author: "Madre Teresa" },
            { text: "La mejor manera de encontrarte a ti mismo es perderte en el servicio a los demás.", author: "Mahatma Gandhi" },
            { text: "Nadie es inútil en este mundo mientras pueda aliviar la carga de sus semejantes.", author: "Charles Dickens" },
            { text: "Hemos venido a este mundo como hermanos; caminemos, pues, dándonos la mano.", author: "William Shakespeare" },
            { text: "Dar es la mayor comunicación.", author: "Madre Teresa" },
            { text: "Solo una vida vivida para los demás es una vida que vale la pena.", author: "Albert Einstein" },
            { text: "El servicio a los demás es el alquiler que pagas por tu habitación aquí en la tierra.", author: "Muhammad Ali" },
            { text: "Nadie se ha vuelto pobre por dar.", author: "Ana Frank" },
            { text: "La felicidad no resulta de lo que obtenemos, sino de lo que damos.", author: "Ben Carson" },
            { text: "Ayudar a una persona no cambiará el mundo entero, pero puede cambiar el mundo para esa persona.", author: "Anónimo" },
            { text: "Sé el arcoíris en la nube de alguien más.", author: "Maya Angelou" },
            { text: "Haz el bien sin mirar a quién.", author: "Ricardo Palma" },
            { text: "El verdadero servicio es hacer algo por alguien que nunca podrá pagártelo.", author: "Anónimo" },
            { text: "La generosidad consiste en dar más de lo que puedes, y el orgullo en tomar menos de lo que necesitas.", author: "Khalil Gibran" },
            { text: "Manos que dan, nunca estarán vacías.", author: "Anónimo" },
            { text: "Servir es amar en acción.", author: "Anónimo" },
            { text: "El propósito de la vida humana es servir y mostrar compasión y voluntad de ayudar a los demás.", author: "Albert Schweitzer" },
            { text: "Pequeños actos de bondad, multiplicados por cientos de personas, pueden transformar el mundo.", author: "Howard Zinn" },
            { text: "La solidaridad es la ternura de los pueblos.", author: "Gioconda Belli" },
            { text: "No podemos ayudar a todos, pero todos pueden ayudar a alguien.", author: "Ronald Reagan" },
            { text: "El servicio es la alegría de saber que has sido útil.", author: "Anónimo" },
            { text: "Cuando sirves a los demás, te sirves a ti mismo.", author: "Anónimo" },
            { text: "La grandeza de una persona se mide por su voluntad de servir.", author: "Anónimo" },
            { text: "Servir es la forma más alta de liderazgo.", author: "Anónimo" },
            { text: "El mundo cambia con tu ejemplo, no con tu opinión.", author: "Paulo Coelho" },
            { text: "Un acto de bondad, por pequeño que sea, nunca se desperdicia.", author: "Esopo" },
            { text: "Si quieres felicidad por una hora, toma una siesta. Si quieres felicidad por una vida, ayuda a alguien.", author: "Proverbio Chino" },
            { text: "La caridad empieza en casa, pero no debe terminar allí.", author: "Thomas Fuller" },
            { text: "Da siempre lo mejor de ti, y lo mejor vendrá.", author: "Madre Teresa" },
            { text: "El amor crece dándose.", author: "Elbert Hubbard" },
            { text: "Servir ennoblece.", author: "Anónimo" },
            { text: "Sé útil y serás feliz.", author: "Anónimo" },
            { text: "La bondad es el lenguaje que los sordos pueden oír y los ciegos pueden ver.", author: "Mark Twain" },
            { text: "No hay ejercicio mejor para el corazón que agacharse y levantar a alguien.", author: "John Holmes" },
            { text: "El egoísmo empobrece, el servicio enriquece.", author: "Anónimo" },
            { text: "Para recibir, primero hay que dar.", author: "Anónimo" },
            { text: "La empatía es ver con los ojos de otro, escuchar con los oídos de otro y sentir con el corazón de otro.", author: "Alfred Adler" },
            { text: "Servir es sembrar esperanza.", author: "Anónimo" },
            { text: "Tu legado es cada vida que tocas.", author: "Oprah Winfrey" },
            { text: "Haz todo el bien que puedas, por todos los medios que puedas.", author: "John Wesley" }
        ];

        // LÓGICA DEL SISTEMA
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            document.getElementById('quote-text').innerText = "⚠️ Error crítico";
            document.getElementById('error-message').classList.remove('hidden');
            console.error("Error detectado:", msg, "Línea:", lineNo);
            return false;
        };

        const STORAGE_KEY = 'frases_vistas_indices_v4'; // Versión 4
        let fraseActual = null;

        function obtenerIndicesVistos() {
            try {
                const guardado = localStorage.getItem(STORAGE_KEY);
                return guardado ? JSON.parse(guardado) : [];
            } catch (e) { return []; }
        }

        function guardarIndiceVisto(index) {
            const vistos = obtenerIndicesVistos();
            if (!vistos.includes(index)) {
                vistos.push(index);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(vistos));
            }
            actualizarContador(vistos.length);
        }

        function reiniciarCiclo() {
            localStorage.removeItem(STORAGE_KEY);
            return [];
        }

        function actualizarContador(vistosCount) {
            if (typeof frasesDatabase === 'undefined' || !Array.isArray(frasesDatabase)) return;
            document.getElementById('counter').innerText = vistosCount;
            document.getElementById('total').innerText = frasesDatabase.length;
        }

        function obtenerFraseAleatoria() {
            if (typeof frasesDatabase === 'undefined' || !Array.isArray(frasesDatabase)) {
                throw new Error("La base de datos de frases está corrupta o vacía.");
            }

            let vistos = obtenerIndicesVistos();
            const todosLosIndices = frasesDatabase.map((_, i) => i);
            let disponibles = todosLosIndices.filter(index => !vistos.includes(index));

            if (disponibles.length === 0) {
                vistos = reiniciarCiclo();
                disponibles = todosLosIndices;
            }

            const indiceAleatorio = disponibles[Math.floor(Math.random() * disponibles.length)];
            return { frase: frasesDatabase[indiceAleatorio], index: indiceAleatorio };
        }

        function registrarRespuesta(respuesta) {
            document.getElementById('feedback-buttons').classList.add('hidden');
            const messageEl = document.getElementById('feedback-message');
            const errorEl = document.getElementById('feedback-error');
            messageEl.classList.remove('hidden');
            messageEl.innerText = "Guardando...";
            
            const datosAEnviar = {
                respuesta: respuesta,
                frase: fraseActual ? fraseActual.text : "Desconocida"
            };

            if (!GOOGLE_SCRIPT_URL || GOOGLE_SCRIPT_URL.includes('TU_URL_DE_APPS_SCRIPT_AQUI')) {
                console.warn("Falta configurar la URL del script");
                setTimeout(() => {
                    messageEl.innerText = "Guardado (Modo Demo - Sin Conexión).";
                }, 1000);
                return;
            }

            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors", 
                headers: { "Content-Type": "text/plain" },
                body: JSON.stringify(datosAEnviar)
            })
            .then(() => {
                if (respuesta === 'SI') {
                    messageEl.innerText = "¡Genial! Nos alegra ayudar.";
                } else {
                    messageEl.innerText = "Gracias por tu opinión.";
                }
            })
            .catch(error => {
                console.error("Error al enviar:", error);
                messageEl.classList.add('hidden');
                errorEl.classList.remove('hidden');
                errorEl.innerText = "No se pudo conectar con Google Sheets.";
            });
        }

        function mostrarNuevaFrase() {
            try {
                document.getElementById('feedback-buttons').classList.remove('hidden');
                document.getElementById('feedback-message').classList.add('hidden');
                document.getElementById('feedback-error').classList.add('hidden');
                document.getElementById('error-message').classList.add('hidden');

                const container = document.getElementById('quote-container');
                container.classList.remove('fade-in');
                void container.offsetWidth; 
                container.classList.add('fade-in');

                const resultado = obtenerFraseAleatoria();
                fraseActual = resultado.frase; 
                
                document.getElementById('quote-text').innerText = `"${resultado.frase.text}"`;
                document.getElementById('quote-author').innerText = `- ${resultado.frase.author || 'Anónimo'}`;

                guardarIndiceVisto(resultado.index);
            } catch (e) {
                console.error("Error fatal:", e);
                document.getElementById('quote-text').innerText = "Error cargando frases.";
                document.getElementById('error-message').classList.remove('hidden');
            }
        }

        window.onload = () => {
            mostrarNuevaFrase();
            actualizarContador(obtenerIndicesVistos().length);
        };

    </script>
</body>
</html>
