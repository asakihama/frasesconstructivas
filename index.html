<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dosis Diaria de Inspiración</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Montserrat:wght@300;400;600&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            /* Evita el rebote de scroll en iOS */
            overscroll-behavior-y: none;
        }
        
        .quote-font {
            font-family: 'Merriweather', serif;
        }

        .fade-in {
            animation: fadeIn 1.0s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Optimizaciones para toque en móviles */
        .feedback-btn {
            transition: transform 0.1s active, background-color 0.2s;
            touch-action: manipulation; /* Elimina el delay de 300ms */
            -webkit-tap-highlight-color: transparent; /* Elimina el flash gris */
        }
        .feedback-btn:active {
            transform: scale(0.96);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen px-4 py-6">

    <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-xl w-full max-w-lg border border-white/60 flex flex-col overflow-hidden relative">
        
        <!-- Contenido Principal -->
        <div class="p-6 md:p-10 flex flex-col items-center text-center flex-grow">
            
            <!-- Logo de la Universidad -->
            <div class="mb-5 w-full flex justify-center">
                <img src="OIP.webp" 
                     alt="Universidad Politécnica Salesiana" 
                     class="h-24 md:h-28 w-auto object-contain hover:scale-105 transition-transform duration-300">
            </div>

            <!-- Contenedor de la frase -->
            <div id="quote-container" class="mb-8 w-full fade-in flex-grow flex flex-col justify-center">
                <p id="quote-text" class="quote-font text-xl md:text-3xl text-gray-800 italic leading-relaxed mb-4">
                    "Cargando inspiración..."
                </p>
                <p id="quote-author" class="text-xs md:text-sm text-gray-500 uppercase tracking-widest font-bold mt-2">
                    
                </p>
            </div>

            <!-- SECCIÓN DE FEEDBACK -->
            <div id="feedback-section" class="w-full bg-indigo-50/80 rounded-2xl p-5 border border-indigo-100">
                <p id="feedback-question" class="text-sm text-gray-600 mb-4 font-semibold">¿Te ayudó esta frase?</p>
                
                <div id="feedback-buttons" class="flex gap-3 w-full">
                    <!-- Botones expandidos para fácil acceso táctil -->
                    <button onclick="registrarRespuesta('SI')" class="feedback-btn flex-1 flex items-center justify-center gap-2 py-4 bg-white text-green-600 border border-green-200 rounded-xl shadow-sm hover:bg-green-50 font-bold text-base md:text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7" />
                        </svg>
                        SÍ
                    </button>
                    
                    <button onclick="registrarRespuesta('NO')" class="feedback-btn flex-1 flex items-center justify-center gap-2 py-4 bg-white text-red-500 border border-red-200 rounded-xl shadow-sm hover:bg-red-50 font-bold text-base md:text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                        NO
                    </button>
                </div>
                
                <!-- Mensajes de estado -->
                <div id="feedback-message" class="hidden py-2 text-indigo-600 text-sm font-semibold animate-pulse">
                    ¡Gracias! Tu respuesta se ha guardado.
                </div>
                <div id="feedback-error" class="hidden py-2 text-red-500 text-xs mt-2">
                    Hubo un error al guardar.
                </div>
            </div>
        </div>

        <!-- Pie de tarjeta -->
        <div class="bg-gray-50 px-6 py-3 text-center border-t border-gray-100">
             <div class="text-[10px] md:text-xs text-gray-400 font-medium">
                Frases vistas: <span id="counter">0</span> / <span id="total">0</span>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURACIÓN ---
        // ¡IMPORTANTE! Pega aquí la URL de tu Google Apps Script
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzYW9yCsGAGb4mbD8M7xE9z8FdEX2J9sMVkX24LE1IhXd3uQBomHYjQocZ12NjZCcE_/exec'; 

        // --- BASE DE DATOS DE FRASES ---
        const frasesDatabase = const frasesDatabase = [
    { text: "El perdón no cambia el pasado, pero ilumina el futuro.", author: "Anónimo" },
    { text: "La paz comienza cuando eliges no permitir que otra persona controle tus emociones.", author: "Anónimo" },
    { text: "Agradece lo que tienes; acabarás teniendo más.", author: "Oprah Winfrey" },
    { text: "La autoestima es la base de una vida plena.", author: "Nathaniel Branden" },
    { text: "Nunca es tarde para ser la persona que podrías haber sido.", author: "George Eliot" },
    { text: "Tu valor no disminuye por alguien que no sabe apreciarlo.", author: "Anónimo" },
    { text: "Todo avance nace de la decisión de intentarlo.", author: "Anónimo" },
    { text: "El primer paso no te lleva a donde quieres, pero te saca de donde estás.", author: "Anónimo" },
    { text: "No cargues con el ayer; hoy es una nueva oportunidad.", author: "Anónimo" },
    { text: "A veces lo que más necesitas soltar es lo que más te pesa.", author: "Anónimo" },
    { text: "La paz interior comienza cuando eliges no reaccionar ante todo lo que te irrita.", author: "Anónimo" },
    { text: "Confía en el proceso, aunque no entiendas el camino.", author: "Anónimo" },
    { text: "Ser feliz no es tener una vida perfecta, es reconocer que vale la pena vivirla a pesar de las dificultades.", author: "Anónimo" },
    { text: "No eres lo que te pasó, eres lo que decides ser.", author: "Anónimo" },
    { text: "El agradecimiento transforma lo que tenemos en suficiente.", author: "Melody Beattie" },
    { text: "Lo que haces hoy puede mejorar todos tus mañanas.", author: "Ralph Marston" },
    { text: "Rodéate de personas que saquen lo mejor de ti.", author: "Anónimo" },
    { text: "Perdonar es liberar un prisionero y descubrir que el prisionero eras tú.", author: "Lewis B. Smedes" },
    { text: "Cierra algunas puertas. No por orgullo, sino porque ya no llevan a ninguna parte.", author: "Paulo Coelho" },
    { text: "Eres más fuerte de lo que crees y más capaz de lo que imaginas.", author: "Anónimo" },
    { text: "A veces el crecimiento duele, pero no crecer duele más.", author: "Anónimo" },
    { text: "Haz que tu vida sea un reflejo de lo que quieres sentir.", author: "Anónimo" },
    { text: "No te rindas, lo mejor está por venir.", author: "Anónimo" },
    { text: "Cada día es una segunda oportunidad.", author: "Anónimo" },
    { text: "La fe en ti mismo es el inicio de todo logro.", author: "Anónimo" },
    { text: "Lo que niegas te somete; lo que aceptas te transforma.", author: "Carl Jung" },
    { text: "Si quieres paz, deja ir la necesidad de tener siempre la razón.", author: "Anónimo" },
    { text: "La vida te rompe muchas veces, pero también te reconstruye más fuerte.", author: "Anónimo" },
    { text: "Agradece incluso los pequeños pasos; también ellos te acercan a la meta.", author: "Anónimo" },
    { text: "No puedes controlar el viento, pero sí ajustar las velas.", author: "Anónimo" },
    { text: "No eres responsable de las expectativas de los demás.", author: "Anónimo" },
    { text: "Perdonar no es olvidar, es elegir seguir adelante.", author: "Anónimo" },
    { text: "La mejor inversión es trabajar en ti mismo.", author: "Warren Buffett" },
    { text: "Donde hay gratitud no hay espacio para la tristeza.", author: "Anónimo" },
    { text: "Las cicatrices son pruebas de que lo intentaste.", author: "Anónimo" },
    { text: "Cada día trae nuevas fuerzas y nuevos pensamientos.", author: "Eleanor Roosevelt" },
    { text: "No te castigues por no ser perfecto; nadie lo es.", author: "Anónimo" },
    { text: "Respira. Todo va a estar bien.", author: "Anónimo" },
    { text: "El agradecimiento abre la puerta a la abundancia.", author: "Anónimo" },
    { text: "Nada cambia si nada cambias.", author: "Anónimo" },
    { text: "Tu alma siempre sabe qué hacer para curarse. El reto es silenciar la mente.", author: "Anónimo" },
    { text: "Acepta lo que es, deja ir lo que fue y haz espacio para lo que será.", author: "Anónimo" },
    { text: "No busques la aprobación de otros; encuéntrate a ti mismo.", author: "Anónimo" },
    { text: "Permítete ser principiante; nadie empieza siendo excelente.", author: "Anónimo" },
    { text: "Tus pensamientos crean tu realidad; cuídalos.", author: "Anónimo" },
    { text: "El amor propio es el inicio de una vida extraordinaria.", author: "Anónimo" },
    { text: "Agradece por lo que tienes y trabaja por lo que deseas.", author: "Anónimo" },
    { text: "Cada logro comienza con la decisión de intentarlo.", author: "Anónimo" },
    { text: "La paz no viene de lo que está a tu alrededor, sino de lo que está dentro de ti.", author: "Anónimo" },
    { text: "Aprende a descansar, no a renunciar.", author: "Anónimo" },
    { text: "Perdona, no porque el otro lo merezca, sino porque tú mereces paz.", author: "Anónimo" },
    { text: "La gratitud convierte la rutina en alegría.", author: "Anónimo" },
    { text: "Eres suficiente, tal como eres.", author: "Anónimo" },
    { text: "Has sobrevivido a todos tus peores días. Puedes con esto también.", author: "Anónimo" },
    { text: "Tu actitud determina tu dirección.", author: "Anónimo" },
    { text: "No dejes que el miedo decida tu futuro.", author: "Anónimo" },
    { text: "La paz se construye con pensamientos de paz.", author: "Anónimo" },
    { text: "Cada amanecer es un recordatorio de que puedes empezar otra vez.", author: "Anónimo" },
    { text: "Sé amable contigo; estás haciendo lo mejor que puedes.", author: "Anónimo" },
    { text: "Cuando cambias la forma de ver las cosas, las cosas cambian.", author: "Wayne Dyer" },
    { text: "Todo comienza con un pequeño paso en la dirección correcta.", author: "Anónimo" },
    { text: "No tengas miedo de soltar aquello que ya terminó.", author: "Anónimo" },
    { text: "El perdón te da libertad.", author: "Anónimo" },
    { text: "La calma es un superpoder.", author: "Anónimo" },
    { text: "Cada día trae un regalo escondido; encuéntralo.", author: "Anónimo" },
    { text: "El amor propio es el mejor antídoto contra la tristeza.", author: "Anónimo" },
    { text: "Lo que hoy parece un sacrificio mañana será tu fortaleza.", author: "Anónimo" },
    { text: "Agradece sin esperar nada a cambio.", author: "Anónimo" },
    { text: "La paz no es la ausencia de problemas, sino la habilidad de estar tranquilo en medio de ellos.", author: "Anónimo" },
    { text: "Perdonar para sanar, agradecer para crecer.", author: "Anónimo" },
    { text: "Eres más valiente de lo que crees.", author: "Anónimo" },
    { text: "Sé tú, sin pedir permiso.", author: "Anónimo" },
    { text: "La vida es más ligera cuando eliges soltar.", author: "Anónimo" },
    { text: "Nunca dudes de tu valor.", author: "Anónimo" },
    { text: "Tu historia no ha terminado todavía.", author: "Anónimo" },
    { text: "La gratitud es la memoria del corazón.", author: "Lao Tsé" },
    { text: "La paz empieza conmigo.", author: "Anónimo" },
    { text: "Cuando agradeces, lo bueno se multiplica.", author: "Anónimo" },
    { text: "Aceptar es el primer paso para transformar.", author: "Anónimo" },
    { text: "Perdonar es sacar de tu alma lo que te hace daño.", author: "Anónimo" },
    { text: "Nunca subestimes el poder de un corazón agradecido.", author: "Anónimo" },
    { text: "Rodéate de paz y la paz te rodeará.", author: "Anónimo" },
    { text: "Cada día puedes renacer.", author: "Anónimo" },
    { text: "Tu luz interior es más fuerte que cualquier sombra.", author: "Anónimo" },
    { text: "Amarte a ti mismo es el inicio de todo cambio.", author: "Anónimo" },
    { text: "El pasado no define quién eres, sino lo que has aprendido.", author: "Anónimo" },
    { text: "No te castigues por lo que no sabías antes.", author: "Anónimo" },
    { text: "Agradecer es sanar.", author: "Anónimo" },
    { text: "Respira profundo, estás vivo; ese es tu primer gran regalo.", author: "Anónimo" },
    { text: "Busca paz, no perfección.", author: "Anónimo" },
    { text: "Eres capaz de cosas maravillosas.", author: "Anónimo" },
    { text: "Deja que la gratitud sea tu brújula.", author: "Anónimo" },
    { text: "Perdónate por no darte antes lo que hoy sabes que necesitas.", author: "Anónimo" },
    { text: "Todo lo que buscas también te está buscando a ti.", author: "Rumi" },
    { text: "Acepta tus tiempos; cada proceso es único.", author: "Anónimo" },
    { text: "Una mente agradecida es imparable.", author: "Anónimo" },
    { text: "Tu paz interior vale más que tener la razón.", author: "Anónimo" },
    { text: "La vida se vuelve más hermosa cuando agradeces.", author: "Anónimo" },
    { text: "El perdón es un regalo que te haces a ti mismo.", author: "Anónimo" },
    { text: "Eres más que suficiente, incluso en tus días más difíciles.", author: "Anónimo" },
    { text: "Permítete sentir, pero también permítete sanar.", author: "Anónimo" },
    { text: "Acepta tu luz y también tus sombras.", author: "Anónimo" },
    { text: "La gratitud convierte el caos en claridad.", author: "Anónimo" },
    { text: "Cree en tu capacidad de transformar tu vida.", author: "Anónimo" },
    { text: "La paz llega cuando dejas de luchar contra ti mismo.", author: "Anónimo" },
    { text: "Haz las paces con tu pasado para que no arruine tu presente.", author: "Anónimo" },
    { text: "Agradece cada experiencia; todas te enseñan algo.", author: "Anónimo" },
    { text: "El amor propio cura heridas que nadie más puede ver.", author: "Anónimo" },
    { text: "Perdonar es elegir libertad.", author: "Anónimo" },
    { text: "Tu valor no depende de la opinión ajena.", author: "Anónimo" },
    { text: "Lo que das vuelve multiplicado.", author: "Anónimo" },
    { text: "Agradece más, preocúpate menos.", author: "Anónimo" },
    { text: "La vida es más simple cuando dejas ir lo que pesa.", author: "Anónimo" },
    { text: "Cada paso que das hacia adelante cuenta.", author: "Anónimo" },
    { text: "La paz interior es tu mayor tesoro.", author: "Anónimo" },
    { text: "Nunca es tarde para comenzar de nuevo.", author: "Anónimo" },
    { text: "La gratitud te conecta con lo esencial.", author: "Anónimo" },
    { text: "Perdonar no te hace débil; te hace libre.", author: "Anónimo" },
    { text: "Nunca olvides cuánto vales.", author: "Anónimo" },
    { text: "Acepta tu proceso, respétalo y abrázalo.", author: "Anónimo" },
    { text: "Lo que agradeces, permanece.", author: "Anónimo" },
    { text: "El cambio empieza por dentro.", author: "Anónimo" },
    { text: "La paz no se encuentra, se crea.", author: "Anónimo" },
    { text: "Perdónate, estás aprendiendo.", author: "Anónimo" },
    { text: "Agradecer es abrir la puerta a la abundancia.", author: "Anónimo" },
    { text: "Tu corazón merece paz.", author: "Anónimo" },
    { text: "No te rindas: lo que hoy duele, mañana te hará más fuerte.", author: "Anónimo" },
    { text: "Llénate de amor y lo compartirás sin esfuerzo.", author: "Anónimo" },
    { text: "Deja que tu vida sea un mensaje de paz.", author: "Anónimo" },
    { text: "Encuentra tiempo para agradecer; siempre hay algo.", author: "Anónimo" },
    { text: "El perdón sanea lo que el rencor intoxica.", author: "Anónimo" },
    { text: "Tú eres tu hogar. Cuídate.", author: "Anónimo" },
    { text: "Agradecer te cambia la energía.", author: "Anónimo" },
    { text: "Camina con fe; la claridad llega después.", author: "Anónimo" },
    { text: "La paz llega cuando te aceptas tal y como eres.", author: "Anónimo" },
    { text: "Hoy elige avanzar, aunque sea despacio.", author: "Anónimo" },
    { text: "Perdona para vivir liviano.", author: "Anónimo" },
    { text: "La gratitud es la más elevada forma de pensamiento.", author: "Anónimo" },
    { text: "La paz interior no tiene precio.", author: "Anónimo" },
    { text: "Eres digno de amor, respeto y cosas buenas.", author: "Anónimo" },
    { text: "Perdona tus errores; fueron parte del aprendizaje.", author: "Anónimo" },
    { text: "Agradece incluso aquello que no salió como esperabas.", author: "Anónimo" },
    { text: "La paz se construye cada día.", author: "Anónimo" },
    { text: "Tu bienestar es una prioridad, no un lujo.", author: "Anónimo" },
    { text: "La gratitud es semilla de alegría.", author: "Anónimo" },
    { text: "El amor propio es un viaje, no un destino.", author: "Anónimo" },
    { text: "Perdonar abre caminos que el rencor cierra.", author: "Anónimo" },

    /* ----------------------------- 50 FRASES DE DON BOSCO ----------------------------- */

    { text: "La base de toda educación es la confianza y el amor.", author: "Don Bosco" },
    { text: "La alegría es la señal de un corazón que ama a Dios.", author: "Don Bosco" },
    { text: "Haz el bien mientras puedas y no dejes para mañana el bien que puedas hacer hoy.", author: "Don Bosco" },
    { text: "La santidad consiste en estar siempre alegres.", author: "Don Bosco" },
    { text: "Dios nos puso en este mundo para los demás.", author: "Don Bosco" },
    { text: "El mejor regalo que puedes hacer a un joven es tu tiempo.", author: "Don Bosco" },
    { text: "Confía en María Auxiliadora y verás lo que son milagros.", author: "Don Bosco" },
    { text: "No basta amar a los jóvenes; es necesario que ellos se den cuenta de que son amados.", author: "Don Bosco" },
    { text: "La paciencia gana todas las batallas.", author: "Don Bosco" },
    { text: "Quien tiene a Dios lo tiene todo.", author: "Don Bosco" },
    { text: "Sé bueno, y verás qué feliz serás.", author: "Don Bosco" },
    { text: "El trabajo y la templanza harán florecer a una sociedad.", author: "Don Bosco" },
    { text: "La educación es cosa del corazón.", author: "Don Bosco" },
    { text: "La caridad bien entendida comienza por uno mismo, pero no debe quedarse ahí.", author: "Don Bosco" },
    { text: "Nunca digas: no tengo tiempo. Todos tenemos tiempo para hacer el bien.", author: "Don Bosco" },
    { text: "Haz el bien y deja hablar a los demás.", author: "Don Bosco" },
    { text: "La humildad es la base de todas las virtudes.", author: "Don Bosco" },
    { text: "La amabilidad abre puertas que la fuerza no puede.", author: "Don Bosco" },
    { text: "Casa que tiene jóvenes alegres, casa que está llena de Dios.", author: "Don Bosco" },
    { text: "El amor supera cualquier dificultad.", author: "Don Bosco" },
    { text: "Coraje, adelante siempre, jamás atrás.", author: "Don Bosco" },
    { text: "La oración es la fuerza del cristiano.", author: "Don Bosco" },
    { text: "La educación es una cuestión del corazón y Dios es su dueño.", author: "Don Bosco" },
    { text: "María lo ha hecho todo.", author: "Don Bosco" },
    { text: "La pureza hace hermosos a los jóvenes.", author: "Don Bosco" },
    { text: "El buen cristiano y honrado ciudadano transforma el mundo.", author: "Don Bosco" },
    { text: "No hay jóvenes malos, solo jóvenes que no saben que pueden ser buenos.", author: "Don Bosco" },
    { text: "Si quieres hacer el bien, hazlo con alegría.", author: "Don Bosco" },
    { text: "La dulzura en el hablar, la caridad en el obrar y la paciencia en el sufrir.", author: "Don Bosco" },
    { text: "La amistad es un tesoro que se conquista con el corazón.", author: "Don Bosco" },
    { text: "En la vida hay que hacer poco ruido y mucho bien.", author: "Don Bosco" },
    { text: "Confía en Dios y no tengas miedo.", author: "Don Bosco" },
    { text: "La música y la alegría son herramientas para acercar el corazón a Dios.", author: "Don Bosco" },
    { text: "Alegraos siempre en el Señor.", author: "Don Bosco" },
    { text: "Todo lo hago por amor a los jóvenes.", author: "Don Bosco" },
    { text: "Un joven que reza es un joven que vence.", author: "Don Bosco" },
    { text: "El cariño es la llave del corazón.", author: "Don Bosco" },
    { text: "La bondad es lo que hace grande a una persona.", author: "Don Bosco" },
    { text: "Con trabajo y templanza llegarás lejos.", author: "Don Bosco" },
    { text: "Dios te ama como eres.", author: "Don Bosco" },
    { text: "Hagan todo por amor, nada a la fuerza.", author: "Don Bosco" },
    { text: "No pierdas la paz por nada del mundo.", author: "Don Bosco" },
    { text: "La fe mueve montañas, pero el amor mueve corazones.", author: "Don Bosco" },
    { text: "El buen humor es prueba de un alma que confía.", author: "Don Bosco" },
    { text: "María Auxiliadora camina en esta casa.", author: "Don Bosco" },
    { text: "La obediencia trae bendiciones.", author: "Don Bosco" },
    { text: "Es imposible educar sin amar.", author: "Don Bosco" },
    { text: "Nunca te canses de hacer el bien.", author: "Don Bosco" },
    { text: "La esperanza es el motor del corazón.", author: "Don Bosco" },
    { text: "Amar es servir.", author: "Don Bosco" }
];
;

        let fraseActual = null;

        // --- LÓGICA DE ALMACENAMIENTO LOCAL ---
        const STORAGE_KEY = 'frases_vistas_indices';
        
        function obtenerIndicesVistos() {
            const guardado = localStorage.getItem(STORAGE_KEY);
            return guardado ? JSON.parse(guardado) : [];
        }

        function guardarIndiceVisto(index) {
            const vistos = obtenerIndicesVistos();
            if (!vistos.includes(index)) {
                vistos.push(index);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(vistos));
            }
            actualizarContador(vistos.length);
        }

        function reiniciarCiclo() {
            localStorage.removeItem(STORAGE_KEY);
            return [];
        }

        function actualizarContador(vistosCount) {
            document.getElementById('counter').innerText = vistosCount;
            document.getElementById('total').innerText = frasesDatabase.length;
        }

        function obtenerFraseAleatoria() {
            let vistos = obtenerIndicesVistos();
            const todosLosIndices = frasesDatabase.map((_, i) => i);
            let disponibles = todosLosIndices.filter(index => !vistos.includes(index));

            if (disponibles.length === 0) {
                vistos = reiniciarCiclo();
                disponibles = todosLosIndices;
            }

            const indiceAleatorio = disponibles[Math.floor(Math.random() * disponibles.length)];
            return { frase: frasesDatabase[indiceAleatorio], index: indiceAleatorio };
        }

        // --- LÓGICA DE RESPUESTA ---

        function registrarRespuesta(respuesta) {
            // UI: Ocultar botones, mostrar carga
            document.getElementById('feedback-buttons').classList.add('hidden');
            const messageEl = document.getElementById('feedback-message');
            const errorEl = document.getElementById('feedback-error');
            messageEl.classList.remove('hidden');
            messageEl.innerText = "Guardando...";
            
            const datosAEnviar = {
                respuesta: respuesta,
                frase: fraseActual ? fraseActual.text : "Desconocida"
            };

            if (GOOGLE_SCRIPT_URL === 'TU_URL_DE_APPS_SCRIPT_AQUI') {
                console.warn("Falta configurar la URL de Google Apps Script");
                setTimeout(() => {
                    messageEl.innerText = "Guardado (Modo Demo Local).";
                }, 500);
                return;
            }

            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors", 
                headers: { "Content-Type": "text/plain" },
                body: JSON.stringify(datosAEnviar)
            })
            .then(() => {
                if (respuesta === 'SI') {
                    messageEl.innerText = "¡Genial! Nos alegra ayudar.";
                } else {
                    messageEl.innerText = "Gracias por tu opinión.";
                }
            })
            .catch(error => {
                console.error("Error:", error);
                messageEl.classList.add('hidden');
                errorEl.classList.remove('hidden');
                errorEl.innerText = "Error de conexión.";
            });
        }

        function mostrarNuevaFrase() {
            document.getElementById('feedback-buttons').classList.remove('hidden');
            document.getElementById('feedback-message').classList.add('hidden');
            document.getElementById('feedback-error').classList.add('hidden');

            const container = document.getElementById('quote-container');
            const quoteText = document.getElementById('quote-text');
            const quoteAuthor = document.getElementById('quote-author');

            container.classList.remove('fade-in');
            void container.offsetWidth; 
            container.classList.add('fade-in');

            const resultado = obtenerFraseAleatoria();
            fraseActual = resultado.frase; 
            
            quoteText.innerText = `"${resultado.frase.text}"`;
            quoteAuthor.innerText = `- ${resultado.frase.author || 'Anónimo'}`;

            guardarIndiceVisto(resultado.index);
        }

        window.onload = () => {
            mostrarNuevaFrase();
            actualizarContador(obtenerIndicesVistos().length);
        };

    </script>
</body>
</html>
